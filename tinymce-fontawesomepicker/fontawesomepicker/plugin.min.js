"use strict";!function(){function e(e,t){if(!e.querySelector('link[href*="'+t+'"]')){var n=e.createElement("link");n.href=t,n.rel="stylesheet",e.head.appendChild(n)}}function t(e){var t={};return e.forEach(function(e){t[e]=1}),Object.keys(t)}function n(e){u.all={icons:[],label:"all"};for(var n in e)u.all.icons=u.all.icons.concat(e[n].icons),u[n]=e[n];u.all.icons=t(u.all.icons)}function i(e){if(!u.all)return fetch(e+"/asset/categories.json").then(function(e){return e.json()}).then(function(e){n(e)})}function o(t,n){var o=t.getParam("fontawesomeUrl");i(n),e(document,o),e(document,n+"/asset/style.css"),e(t.contentDocument,o)}function c(e,t){this.editor=e,this.pluginUrl=t,this.$body=""}function s(e){e.editor.addCommand("mceShowFontawesomepicker",function(){e.open()})}function a(e){e.editor.ui.registry.addIcon(l,'<svg width="24" height="24" viewBox="0 0 512 512"><path d="M116.65 219.35a15.68 15.68 0 0 0 22.65 0l96.75-99.83c28.15-29 26.5-77.1-4.91-103.88C203.75-7.7 163-3.5 137.86 22.44L128 32.58l-9.85-10.14C93.05-3.5 52.25-7.7 24.86 15.64c-31.41 26.78-33 74.85-5 103.88zm143.92 100.49h-48l-7.08-14.24a27.39 27.39 0 0 0-25.66-17.78h-71.71a27.39 27.39 0 0 0-25.66 17.78l-7 14.24h-48A27.45 27.45 0 0 0 0 347.3v137.25A27.44 27.44 0 0 0 27.43 512h233.14A27.45 27.45 0 0 0 288 484.55V347.3a27.45 27.45 0 0 0-27.43-27.46zM144 468a52 52 0 1 1 52-52 52 52 0 0 1-52 52zm355.4-115.9h-60.58l22.36-50.75c2.1-6.65-3.93-13.21-12.18-13.21h-75.59c-6.3 0-11.66 3.9-12.5 9.1l-16.8 106.93c-1 6.3 4.88 11.89 12.5 11.89h62.31l-24.2 83c-1.89 6.65 4.2 12.9 12.23 12.9a13.26 13.26 0 0 0 10.92-5.25l92.4-138.91c4.88-6.91-1.16-15.7-10.87-15.7zM478.08.33L329.51 23.17C314.87 25.42 304 38.92 304 54.83V161.6a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V99.66l112-17.22v47.18a83.25 83.25 0 0 0-16-1.7c-35.35 0-64 21.48-64 48s28.65 48 64 48c35.2 0 63.73-21.32 64-47.66V32c0-19.48-16-34.42-33.92-31.67z"/></svg>'),e.editor.ui.registry.addButton(l,{icon:l,tooltip:l,onAction:function(){return e.open()}}),e.editor.ui.registry.addMenuItem(l,{icon:l,text:l,onAction:function(){return e.open()}})}function r(e){e.settings.extended_valid_elements=e.settings.extended_valid_elements||"",e.settings.extended_valid_elements+=",span[*]"}var l="fontawesomepicker",d=tinymce.util.Tools.resolve("tinymce.PluginManager"),u={};Object.assign(c.prototype,{renderNav:function(){var e="";e+='<div class="mce-fontawesomepicker--nav">';for(var t in u){e+='<div class="mce-fontawesomepicker--nav__item" title="'+t+'">'+u[t].label+"</div>"}return e+="</div>"},renderIcons:function(){var e=this,t="";return t+='<div class="mce-fontawesomepicker--icons">',t+=u.all.icons.reduce(function(t,n){var i=e.toIconClass(n);return t+='<div class="mce-fontawesomepicker--icon" title="'+n+'">',t+='\t<i class="'+i+'"></i>',t+="\t<span>"+n+"</span>",t+="</div>"},""),t+="</div>"},renderBody:function(){return this.$body?this.$body:(this.$body+='<div class="mce-fontawesomepicker--body">',this.$body+='\t<div class="mce-fontawesomepicker--aside">',this.$body+=this.renderNav(),this.$body+="\t</div>",this.$body+='\t<div class="mce-fontawesomepicker--content">',this.$body+=this.renderIcons(),this.$body+="\t</div>",this.$body+="</div>",this.$body)},open:function(){this.editor.windowManager.open({title:"Icons",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:this.renderBody()}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]}),this.openAfter()},openAfter:function(){var e=this;e.changeNav("all"),this.editor.$(".mce-fontawesomepicker--nav__item",document).off("click").on("click",function(){var t=this.getAttribute("title");e.changeNav(t)}),this.editor.$(".mce-fontawesomepicker--icon",document).off("click").on("click",function(){var t=this.getAttribute("title");e.insertIcon(t)})},toIconClass:function(e){var t=e.split("-")[0];return e.replace(t,t+" fa")},showIcons:function(e){var t=u[e];t&&this.editor.$(".mce-fontawesomepicker--icon",document).each(function(e){var n=this.getAttribute("title");this.style.display=t.icons.includes(n)?"block":"none"})},changeNav:function(e){var t=document.querySelector(".mce-fontawesomepicker--nav__item.current"),n=document.querySelector('.mce-fontawesomepicker--nav__item[title="'+e+'"]');t&&t.classList.remove("current"),n&&n.classList.add("current"),this.showIcons(e)},insertIcon:function(e){var t=this.toIconClass(e),n='<span><span style="display:none;">.</span><span contenteditable="false" class="'+t+'"></span></span>';this.editor.execCommand("mceInsertContent",!1,n),this.editor.windowManager.close()}}),function(){d.add(l,function(e,t){var n=new c(e,t);return r(e),e.on("init",o.bind(null,e,t)),s(n),a(n),{}})}()}();